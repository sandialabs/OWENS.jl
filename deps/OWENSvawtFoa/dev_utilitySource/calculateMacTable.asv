function [ mac ] = calculateMacTable(file1,file2)
%calculates a modal assurance criterion table from eigenvectors


vec1 = load(file1);
vec2 = load(file2);
vec1 = vec1.eigVec;
vec2 = vec2.eigVec;

vec1a = vec1(:,2:2:end);
vec1b = vec1(:,1:2:end);
vec2a = vec2(:,2:2:end);
vec2b = vec2(:,1:2:end);

[numDof,numModes] = size(vec1a);
mac = zeros(numModes);
for i=1:numModes
    for j=1:numModes
        aa = vec1a(1:numDof/2,i);
        ab = vec1b(1:numDof/2,i);       
        ba = vec2a(1:numDof/2,j);
        bb = vec2b(1:numDof/2,j); 
        
        mac(i,j) =  ((ab'*bb)*(bb'*ab))/((ab'*ab)*(bb'*bb));
%         mac(i,j) =  ((a'*b)*(b'*a))/((a'*a)*(b'*b));
    end
end


end
