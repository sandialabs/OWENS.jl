<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Developer Guide · OWENS.jl</title><meta name="title" content="Developer Guide · OWENS.jl"/><meta property="og:title" content="Developer Guide · OWENS.jl"/><meta property="twitter:title" content="Developer Guide · OWENS.jl"/><meta name="description" content="Documentation for OWENS.jl."/><meta property="og:description" content="Documentation for OWENS.jl."/><meta property="twitter:description" content="Documentation for OWENS.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">OWENS.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../indepth_installation/">Installation</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../examples/A_simplyRunningOWENS/">Simply Running OWENS</a></li><li><a class="tocitem" href="../examples/B_detailedInputs/">Detailed Inputs</a></li><li><a class="tocitem" href="../examples/C_customizablePreprocessing/">Customizable Preprocessing</a></li><li><a class="tocitem" href="../examples/D_simulatingFloatingPlatforms/">Simulating Floating Platforms</a></li><li><a class="tocitem" href="../examples/E_RM2_Medium/">Marine Hydrokinetic RM2</a></li></ul></li><li class="is-active"><a class="tocitem" href>Developer Guide</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Contributing"><span>Contributing</span></a></li><li><a class="tocitem" href="#Julia-Code-Formatting"><span>Julia Code Formatting</span></a></li><li class="toplevel"><a class="tocitem" href="#Glue-Code-Basic-Theory"><span>Glue Code Basic Theory</span></a></li><li class="toplevel"><a class="tocitem" href="#WindIO-Usage"><span>WindIO Usage</span></a></li><li class="toplevel"><a class="tocitem" href="#Global-Frame-of-Reference"><span>Global Frame of Reference</span></a></li><li class="toplevel"><a class="tocitem" href="#InflowWind-and-TurbSim-Velocity-Inflow"><span>InflowWind and TurbSim Velocity Inflow</span></a></li><li class="toplevel"><a class="tocitem" href="#Airfoils"><span>Airfoils</span></a></li><li class="toplevel"><a class="tocitem" href="#OWENSAero-Aerodynamics-(AC-and-DMS)"><span>OWENSAero Aerodynamics (AC and DMS)</span></a></li><li><a class="tocitem" href="#OWENSFEA-Structures"><span>OWENSFEA Structures</span></a></li><li><a class="tocitem" href="#Marine-Considerations"><span>Marine Considerations</span></a></li><li><a class="tocitem" href="#Composites"><span>Composites</span></a></li><li><a class="tocitem" href="#Hydrodynamics"><span>Hydrodynamics</span></a></li><li><a class="tocitem" href="#Mooring"><span>Mooring</span></a></li><li class="toplevel"><a class="tocitem" href="#Coupling-Methods"><span>Coupling Methods</span></a></li><li><a class="tocitem" href="#Inflow-Aero"><span>Inflow - Aero</span></a></li><li><a class="tocitem" href="#Aero-Turbine-Structure"><span>Aero - Turbine Structure</span></a></li><li><a class="tocitem" href="#Turbine-Structure-Platform-Structure"><span>Turbine Structure - Platform Structure</span></a></li><li><a class="tocitem" href="#Hydro-Platform-Structure-Mooring"><span>Hydro - Platform Structure - Mooring</span></a></li><li><a class="tocitem" href="#Structures-Composites"><span>Structures - Composites</span></a></li><li><a class="tocitem" href="#Controllers-Control-Elements"><span>Controllers - Control Elements</span></a></li></ul></li><li><span class="tocitem">API Reference</span><ul><li><a class="tocitem" href="../reference/reference/">OWENS</a></li><li><a class="tocitem" href="../reference/referenceAero/">OWENSAero</a></li><li><a class="tocitem" href="../reference/referenceFEA/">OWENSFEA</a></li><li><a class="tocitem" href="../reference/referenceOpenFASTWrappers/">OWENSOpenFASTWrappers</a></li><li><a class="tocitem" href="../reference/referencePreComp/">OWENSPreComp</a></li></ul></li><li><a class="tocitem" href="../legacyUserGuide/">Legacy User Guide</a></li><li><a class="tocitem" href="../VAWTGenUserGuide/">Legacy VAWTGen Guide</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Developer Guide</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Developer Guide</a></li></ul></nav><div class="docs-right"><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><hr/><p>author:</p><ul><li>Kevin R. Moore</li></ul><p>bibliography:</p><ul><li>ac_sources.bib</li></ul><p>title: Offshore Wind Energy Simulator (OWENS) Glue Code Basic Theory,   Frames of Reference, and Inter-Module Coupling Methods –-</p><h1 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h1><p>The Offshore Wind Energy Simulator (OWENS) Code is a floating turbine-platform code capable of steady, unsteady, and modal analysis. It is comprised of, or coupled to many modules for aerodynamics, hydrodynamics, mooring dynamics, and finite element formulations.</p><p><em>How</em> many of these items are used is not straightforward or a-priori and can easily lead to confusion or mistake (like how the aerodynamics uses inflow data; is it just simple based on the mean hub velocity, or in the rotating blade frame of reference? If the latter, what is that frame of reference so that we make sure we don&#39;t incorrectly map the vectors?) This document is intended as a developers guide for the intent of clearing up the relative ambiguity between the many moving and modular pieces. It is not a full theory document or users guide. For theory and use, please see the theory and user guides respectively. Within this document, we give enough detail about the operations of the \&quot;glue\&quot; code, the frames of reference, and coupling methods to aid further development.</p><h1 id="Contributing"><a class="docs-heading-anchor" href="#Contributing">Contributing</a><a id="Contributing-1"></a><a class="docs-heading-anchor-permalink" href="#Contributing" title="Permalink"></a></h1><p>Please make all feature changes and bug fixes as branches and then create pull requests against the dev branch. The dev branch will be periodically pulled into master.</p><h2 id="Julia-Code-Formatting"><a class="docs-heading-anchor" href="#Julia-Code-Formatting">Julia Code Formatting</a><a id="Julia-Code-Formatting-1"></a><a class="docs-heading-anchor-permalink" href="#Julia-Code-Formatting" title="Permalink"></a></h2><p>To ensure code consistency, all Julia code in the <code>src/</code> folder must be formatted using <a href="https://github.com/domluna/JuliaFormatter.jl">JuliaFormatter.jl</a>. Formatting is automatically checked in continuous integration (CI) for all changes to the <code>src/</code> directory. Contributors are required to run JuliaFormatter locally on the <code>src/</code> folder before submitting pull requests. You can do this by running:</p><pre><code class="language-bash hljs">julia --project -e &#39;using JuliaFormatter; format(&quot;src&quot;)&#39;</code></pre><p>Only the <code>src/</code> folder is required to be formatted. Other folders (such as <code>examples/</code> or <code>test/</code>) are not currently enforced by CI.</p><h1 id="Glue-Code-Basic-Theory"><a class="docs-heading-anchor" href="#Glue-Code-Basic-Theory">Glue Code Basic Theory</a><a id="Glue-Code-Basic-Theory-1"></a><a class="docs-heading-anchor-permalink" href="#Glue-Code-Basic-Theory" title="Permalink"></a></h1><p>Due to the nonlinearity and non-closed-form nature of the floating turbine problem in both the design and temporal space, OWENS uses many types of iterative solution methods, specific to the physics involved. Loose or Gauss-Seidel iteration is used for the coupling between the modules. gives an overview of the general code structure for transient analysis, with the main equations being solved and the relative location of the iteration loops.</p><p>::: algorithm ::: spacing 1.18</p><p>::: algorithmic Initialize simulation (all module parameters, meshing, composite properties, etc) Initialize displacements and forces as 0</p><p>Get driveshaft displacement from generator torque Get rotor speed, rotational displacement from generator torque, aero torque, and turbine inertia Get aero forces from rotor speed, position Get structural displacements and reaction forces from aero forces Update displacements<span>$_\text{guess}$</span> with the calculated displacements ::: :::</p><p>[]{#alg:Transient label=&quot;alg:Transient&quot;} :::</p><h1 id="WindIO-Usage"><a class="docs-heading-anchor" href="#WindIO-Usage">WindIO Usage</a><a id="WindIO-Usage-1"></a><a class="docs-heading-anchor-permalink" href="#WindIO-Usage" title="Permalink"></a></h1><p>The majority of the WindIO standard can be used for the structural and aerodynamic design.  Airfoil polars are forthcoming.  However, there are the following additional and limitations:</p><ul><li>Gravity single value or array of 3, is in the global frame of reference, so positive gravity would be pulling the structure up.</li><li>Start and end nd_arc values are the only input supported.  Otherwise, there are as many as 12 different ways to specify this input.</li><li>Grids must be defined from end to end, set number of plies to 1e-6 at unused spanwise sections.</li><li>The blade object is reused for the tower, struts, cables, etc. since these elements can be modeled at the same fidelity as the blade and can be simplified via simpler inputs, but the other WindIO definitions don&#39;t allow for the more complex inputs.</li></ul><h1 id="Global-Frame-of-Reference"><a class="docs-heading-anchor" href="#Global-Frame-of-Reference">Global Frame of Reference</a><a id="Global-Frame-of-Reference-1"></a><a class="docs-heading-anchor-permalink" href="#Global-Frame-of-Reference" title="Permalink"></a></h1><p>Thanks to some legacy VAWT frames of reference where wind was originally coming from the top down, and then from the left right, the convention was to simply rotate the axes instead of properly redefining the global frame of reference to match standard math convention again. Therefore, an azimuth angle of 0, or yaw angle for standard VAWT frame of reference is top dead center. Therefore, blade 1 of a vawt should also be top dead center, i.e. aligned with the y+ axis as shown below.</p><p><img src="../figs/global_FOR3.png" alt="Global Frame of Reference. Wind comes in from the left in the direction of the positive X-axis, the positive Y-axis is 90 degrees counter-clockwise to the X-axis. Z-axis is vertical. Positive rotations follow right hand rule. Note that the turbine is modeled in the rotating frame of reference. Therefore, the turbine stays stationary in its initial meshed position, excepting deformations, and inertial effects are calculated. The developer must use the calculated rotational position to map to the other models as necessary."/>{#fig:ac_velocities width=&quot;60%&quot;}</p><h1 id="InflowWind-and-TurbSim-Velocity-Inflow"><a class="docs-heading-anchor" href="#InflowWind-and-TurbSim-Velocity-Inflow">InflowWind and TurbSim Velocity Inflow</a><a id="InflowWind-and-TurbSim-Velocity-Inflow-1"></a><a class="docs-heading-anchor-permalink" href="#InflowWind-and-TurbSim-Velocity-Inflow" title="Permalink"></a></h1><p>This is how it is defined in the manual, despite inverting the positive direction of rotation compared to standard notation.</p><p><img src="../figs/inflow_wind.pdf" alt="Wind frame of reference is the same as global. However, the angle follows TurbSim and [InflowWind](https://github.com/old-NWTC/InflowWind) notation Wind propagation angle is zero when aligned with the positive X-axis and clockwise positive, in the direction of the negative negative Y-axis."/>{#fig:ac_velocities width=&quot;50%&quot;}</p><h1 id="Airfoils"><a class="docs-heading-anchor" href="#Airfoils">Airfoils</a><a id="Airfoils-1"></a><a class="docs-heading-anchor-permalink" href="#Airfoils" title="Permalink"></a></h1><p>Airfoil geometry is typically defined starting at the trailing edge (1,0), looping around the bottom/pressure side to the leading edge (0,0), and then back along the top/suction side to the trailing edge (1,0) again.  There are several automatic corrections to handle files that slightly ill formatted, with output warnings, but this is limited and should not be relied on.</p><p>Airfoil polars are currently in different formats for OWENSAero and AeroDyn, see examples.  The airfoil name in the structural definition is assumed to be the same airfoil name as the geometry and the polar data.  The path to these files is automatically resolved as relative to the run location, so it expects an airfoils folder there.</p><p>Future work is planned to include enabling OWENSAero to read in the same airfoil files as AeroDyn, and to automatically generate polars from xfoil.jl.</p><h1 id="OWENSAero-Aerodynamics-(AC-and-DMS)"><a class="docs-heading-anchor" href="#OWENSAero-Aerodynamics-(AC-and-DMS)">OWENSAero Aerodynamics (AC and DMS)</a><a id="OWENSAero-Aerodynamics-(AC-and-DMS)-1"></a><a class="docs-heading-anchor-permalink" href="#OWENSAero-Aerodynamics-(AC-and-DMS)" title="Permalink"></a></h1><p><img src="../figs/vawt_slice.pdf" alt="VAWT 2D section looking downwards with induced velocity \$w\$ vector broken into \$u\$ and \$v\$ components depicted by arrows. Airfoils show example blade locations with dots aligning to the circumferential discretization. Aero frame of reference is the same as global, however a blade is at 0 degrees azimuth when it is aligned with the Y-axis. If an aero module is 2D, it is made quasi-3D by stacking slices from lower to higher in the Z-axis."/>{#fig:ac_velocities width=&quot;50%&quot;}</p><p>Note: CACTUS, does not fully follow this scheme and differs from the global frame of reference by switching the Y and Z axes for a VAWT. Also, be careful with the geometry inputs; if the blade 1 starts out at the \&quot;south\&quot; position, as opposed to the north, then it will behave as though it were a north starting blade rotating clockwise, and a symmetric gust velocity will match (if the simple iec uniform gust is used). All else for CACTUS follows the description above.</p><p>Aerodynamics forces are radial inward positive and tangential in direction of rotation positive. So, the blade local accelerations in the radial will be outward positive and in the tangential  will be in the opposite direction of rotation for a CCW rotor.  CW rotors are still in work and would need to have the local frame of reference rotation verified.  Therefor, for the added mass  equations, the forces should be negated. </p><h2 id="OWENSFEA-Structures"><a class="docs-heading-anchor" href="#OWENSFEA-Structures">OWENSFEA Structures</a><a id="OWENSFEA-Structures-1"></a><a class="docs-heading-anchor-permalink" href="#OWENSFEA-Structures" title="Permalink"></a></h2><p>Yaw is equivalent to the global azimuth angle as above, and is denoted in the code as Psi. Zero is top dead center, right hand rule positive rotation. The subscript D indicates degrees. Theta is the element slope, or delta, and</p><p>The rotation sequence is a Roll (Rx) - Pitch (Ry) - Yaw (Rz) sequence in OWENSFEA (R = Rz * Ry *Rx in multiplication order). This corresponds to Twist - Theta - Psi angle ordering. In the matrix multiplication this is R = <span>$R_{psi}$</span> * <span>$R_{theta}$</span> * <span>$R_{twist}$</span>, which is a [3,2,1] matrix ordering.</p><p>::: center    Name    Rotation Axis   OWENS Angle Names   –––- –––––––- –––––––––-    Roll       about X            Twist    Pitch      about Y            Theta     Yaw       about Z             Psi</p><p>: Module Level of Detail in This Document :::</p><p>We apply these in order of Roll, then Pitch, then Yaw, which is R = Rz * Ry * Rx (application is from right to left in rotations) for a rotation of vector x by R. i.e R(x) = Rz * Ry * Rx * x.</p><p>In the code I now have ang = [ort.Psid[idx], ort.Thetad[idx],ort.Twistd[idx]+180,-90]; DCM = CH2G * createGeneralTransformationMatrix(ang,[3,2,1,2]); Where I have an additional rotation by -90 about the Y axis to align Z with X before applying the other rotation sequences. This is due to AD15 using the IEC conventions with +Z along the blade, but the beam solver using the more typical beam formulation of +X along the beam.</p><p>This is almost consistent between blades and struts (have a +90 rotation on struts for some reason that I haven&#39;t sorted out yet).</p><p>Rotating Frame of Reference, 6 DOF where 1 = turbine vertical force, 2 = turbine 2D slice tangential force, 3 = turbine 2D slice normal force, 4 = blade M25 twisting moment, 5 = blade curvature twisting moment, 6 = blade sweep moment.</p><p>The Mesh matches the global frame of reference of x, y, and z. Element length is the length along the element.</p><p>The mesh itself is comprised only of components. For example, a tower, two blades, and four struts. The element number is sequential. There are overlapping points where each component connects. The mesh has a connectivity vector, which has rows corresponding to each element, column 1 corresponds to the \&quot;master\&quot; node, and column 2 corresponds to the \&quot;slave\&quot; node. The element connection in the mesh is only intra-component. I.e. there is no connectivity between components - that is defined in the joint matrix, which has columns for: Joint Number, Joint Master Node, Joint Slave Node, Joint Type, Joint Mass, Not Used, PsiD, ThetaD. The D indicates angle in degrees. Joint types are: (0 = weld(fixed), 1=pinned, 2 = hinge joint with axis about slave node element&#39;s e2 axis, 3 = hinge joint axis about slave node element&#39;s e1 axis, 4 = hinge joint axis about slave node element&#39;s e3 axis). The Psi and Theta are of the slave node (or its closest neighbor of the same component due to the gaps in element mesh connectivity). The not used column is just filled with zeros. The \&quot;flapwise\&quot; normal vector of an element is forced to be away from the machine for consistency. During the meshing process, the component type need to be known in order to get this right: Mesh Type: 0-blade 1-tower 2-strut.</p><p>Note: Precomp calculates the sectional properties based on the input airfoil geometry.  A change in the leading edge offset will change the sectional properties.  The beam mesh in OWENS always aligns with the precomp defined axis.  This should align with reality, if for example, you define the leading edge offset as the quarter chord (so the beam forces align with the aero definition), then applied forces on the beam will bend with expected coupling, just like an airfoil with forcing that does not correspond to the sectional shear center.  There are terms for &quot;a&quot; in the structural solver, which which are for the internal flutter calculation.  These terms DO NOT offset the sectional property calculation.</p><h2 id="Marine-Considerations"><a class="docs-heading-anchor" href="#Marine-Considerations">Marine Considerations</a><a id="Marine-Considerations-1"></a><a class="docs-heading-anchor-permalink" href="#Marine-Considerations" title="Permalink"></a></h2><p>When we turn on AddedMass<em>Coeff</em>Ca&gt;0.0, this causes a few changes.  The added mass is included in the GXBeam 6x6 inertia terms (2,2 and 3,3) since a force coupling is unstable.  This changes the more smooth gravitational and centrifugal loads, so they are offloaded to the aero model, and are handled in the buoyancy and centrifugal force respectively.  Note, that for the GX implementation, this is required, but for the Timoshenko implementation, added mass is not coupled to the internal centrifugal force, so one could use TNB or ROM with added mass, turn gravity on, turn it off for the aero, and turn the centrifugal forcing off for aero as well.  That&#39;s a lot to change, so it is recommended to keep with the current implementation until development occurs otherwise. The example cases and/or tests contain verification cases of the added mass and buoyancy implementations.</p><h2 id="Composites"><a class="docs-heading-anchor" href="#Composites">Composites</a><a id="Composites-1"></a><a class="docs-heading-anchor-permalink" href="#Composites" title="Permalink"></a></h2><h2 id="Hydrodynamics"><a class="docs-heading-anchor" href="#Hydrodynamics">Hydrodynamics</a><a id="Hydrodynamics-1"></a><a class="docs-heading-anchor-permalink" href="#Hydrodynamics" title="Permalink"></a></h2><p>Hydrodynamics are applied into OWENS using the HydroDyn module native to <a href="https://github.com/OpenFAST/openfast">OpenFAST</a>, but applied here through a standalone library linked to OWENS. The physics contained in the HydroDyn standalone library is virtually unchanged from its native application in OpenFAST. HydroDyn user documentation can be found <a href="https://openfast.readthedocs.io/en/main/source/user/hydrodyn/index.html">here</a>.</p><h3 id="Platform-Structure"><a class="docs-heading-anchor" href="#Platform-Structure">Platform Structure</a><a id="Platform-Structure-1"></a><a class="docs-heading-anchor-permalink" href="#Platform-Structure" title="Permalink"></a></h3><p>To enable capturing the hydrodynamics in OWENS for floating turbines, a second mesh is created to represent the platform. OWENS assumes the platform is a rigid body, so the mesh is composed of a single element with effectively infinite stiffness. The two nodes forming this element are:</p><ul><li>The platform reference point (i.e., the platform at the still water level along the vertical centerline of its center of gravity) is the bottom node</li><li>The tower base point is the top node</li></ul><p>The structures composing the platform mesh itself are the same as the OWENSFEA structures documented above, though most of the definitions to define the mesh can be set to zero or are very simple. There are two main exceptions:</p><ul><li>The platform center of gravity must be defined, since neither node is at this location. This is defined in the <code>zcm</code> parameter in the <code>SectionPropsArray</code> for the platform mesh.</li><li>The 6x6 rigid body mass matrix is defined as a concentrated input at the platform reference point node</li></ul><p>A full example of these definitions can be found in the floating platform example notebook (TODO).</p><h3 id="Solve-Procedure"><a class="docs-heading-anchor" href="#Solve-Procedure">Solve Procedure</a><a id="Solve-Procedure-1"></a><a class="docs-heading-anchor-permalink" href="#Solve-Procedure" title="Permalink"></a></h3><p>When applying hydrodynamics, OWENS adds additional Gauss-Seidel loops to solve for the structural motions of both the platform mesh and the &quot;topside&quot; mesh (i.e. everything above the platform) in a way that generates global convergence. This process is:</p><ol><li>Solve via a Gauss-Seidel loop for the topside mesh using platform motions from the <em>previous</em> time step</li></ol><ul><li>Setting platform motions to zero is how OWENS runs for land-based turbines</li></ul><ol><li>Solve via an outer Gauss-Seidel loop and an inner Newton-Raphson loop for the platform mesh, using updated external hydrodynamic loads from HydroDyn and tower base loads from step 1</li></ol><ul><li>The Newton-Raphson loop is contained in <code>Unsteady.OWENS_HD_Coupled_Solve</code>, and is necessary to properly account for added mass impacting both HydroDyn and OWENS in a tightly coupled manner.</li></ul><p>This solve process is complex, but is documented in detail in Section 2.4.1 of Devin et al. (2022) <a href="https://www.mdpi.com/1996-1073/16/5/2462">here</a>.   This is a very similar procedure used to coupled HydroDyn to the ElastoDyn module in OpenFAST.</p><ol><li>Solve via a Gauss-Seidel loop for the topside mesh using platform motions from the <em>current</em> time step, i.e. the motions calculated in step 2.</li></ol><p>This flow chart visualizes this solve procedure, and which step corresponds to which modules connecting to the core OWENS glue code: <img src="../figs/hydro_solve_flowchart.pdf" alt="Hydrodynamics Solve Procedure Flowchart"/></p><h3 id="Reference-Frame-Conversions"><a class="docs-heading-anchor" href="#Reference-Frame-Conversions">Reference Frame Conversions</a><a id="Reference-Frame-Conversions-1"></a><a class="docs-heading-anchor-permalink" href="#Reference-Frame-Conversions" title="Permalink"></a></h3><p>Since HydroDyn operates in the global reference frame, the hydrodynamics capabilities in OWENS deviate from the general convention in OWENS of operating in the hub reference frame. As a result, operations manipulating the platform mesh (e.g. running <code>OWENSFEA.structuralDynamicsTransient</code>) are also applied in the global reference frame. Functionally, this means that the <code>rbData</code> vector input is set to zero when using the platform mesh in <code>OWENSFEA.structuralDynamicsTransient</code>. <strong>Care must be taken for I/O procedures between the platform and topside meshes!</strong> The <code>Unsteady_utilities.frame_convert</code> function is intended to make this process simpler.</p><h2 id="Mooring"><a class="docs-heading-anchor" href="#Mooring">Mooring</a><a id="Mooring-1"></a><a class="docs-heading-anchor-permalink" href="#Mooring" title="Permalink"></a></h2><p>Mooring dynamics for floating platforms in OWENS are calculated using a standalone library linking to <a href="https://moordyn.readthedocs.io/en/latest/">MoorDyn</a>, another module native to OpenFAST. The mooring loads calculated in MoorDyn are applied as an external load to the same platform mesh as the hydrodynamics, as described above. Since the mooring dynamics do not need to account for added mass, the coupling between MoorDyn and OWENS is much simpler, and the mooring dynamics are applied in the Gauss-Seidel solve procedure without being modified by the additional Newton-Raphson solve in <code>Unsteady.OWENS_HD_Coupled_Solve</code>. Note that MoorDyn operates in the global reference frame, so be careful with reference frame conversions for MoorDyn I/O.</p><h1 id="Coupling-Methods"><a class="docs-heading-anchor" href="#Coupling-Methods">Coupling Methods</a><a id="Coupling-Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Coupling-Methods" title="Permalink"></a></h1><h2 id="Inflow-Aero"><a class="docs-heading-anchor" href="#Inflow-Aero">Inflow - Aero</a><a id="Inflow-Aero-1"></a><a class="docs-heading-anchor-permalink" href="#Inflow-Aero" title="Permalink"></a></h2><p>Direct: Aero module supplies an x-y-z and time coordinate, inflow returns x-y-z velocity. This is repeated for all blade discrete points as per the aero formulation.</p><h2 id="Aero-Turbine-Structure"><a class="docs-heading-anchor" href="#Aero-Turbine-Structure">Aero - Turbine Structure</a><a id="Aero-Turbine-Structure-1"></a><a class="docs-heading-anchor-permalink" href="#Aero-Turbine-Structure" title="Permalink"></a></h2><p>Loose Iteration: Structure provides blade local radius, twist, sweep, and 6 DOF velocities, aero returns forces, moments. This is iterated on until convergence. It is preferred to change this to a N-dimensional root solver and pass gradients to the root solver to increase performance.</p><p>Specifically, from the meshing process, the starting and ending node numbers for the blades are known and the aerodynamic loads mapped to the elements between those nodes.</p><h2 id="Turbine-Structure-Platform-Structure"><a class="docs-heading-anchor" href="#Turbine-Structure-Platform-Structure">Turbine Structure - Platform Structure</a><a id="Turbine-Structure-Platform-Structure-1"></a><a class="docs-heading-anchor-permalink" href="#Turbine-Structure-Platform-Structure" title="Permalink"></a></h2><p>Same as Aero-Structure</p><h2 id="Hydro-Platform-Structure-Mooring"><a class="docs-heading-anchor" href="#Hydro-Platform-Structure-Mooring">Hydro - Platform Structure - Mooring</a><a id="Hydro-Platform-Structure-Mooring-1"></a><a class="docs-heading-anchor-permalink" href="#Hydro-Platform-Structure-Mooring" title="Permalink"></a></h2><p>Same as Aero-Structure</p><h2 id="Structures-Composites"><a class="docs-heading-anchor" href="#Structures-Composites">Structures - Composites</a><a id="Structures-Composites-1"></a><a class="docs-heading-anchor-permalink" href="#Structures-Composites" title="Permalink"></a></h2><p>Initialization is Direct: Structures provides macro geometry, Composites provide sectional properties. Composite Failure is Direct: Structure provides strains, composites provides failure. Buckling is also calculated.</p><h2 id="Controllers-Control-Elements"><a class="docs-heading-anchor" href="#Controllers-Control-Elements">Controllers - Control Elements</a><a id="Controllers-Control-Elements-1"></a><a class="docs-heading-anchor-permalink" href="#Controllers-Control-Elements" title="Permalink"></a></h2><p>Direct: Controllers provide reactionary inputs to control inputs in real time based on dynamics.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../examples/E_RM2_Medium/">« Marine Hydrokinetic RM2</a><a class="docs-footer-nextpage" href="../reference/reference/">OWENS »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Friday 5 September 2025 22:47">Friday 5 September 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
